üîπ Usando Azure PowerShell
Pr√©-requisito

Instalar o Azure PowerShell (Az module).

Conectar-se √† conta:

Connect-AzAccount

üîí Criar um Bloqueio

Exemplo: Bloqueio do tipo Delete em uma m√°quina virtual.

New-AzResourceLock `
  -LockName "BloqueioVM" `
  -LockLevel CanNotDelete `
  -ResourceName "MinhaVM" `
  -ResourceType "Microsoft.Compute/virtualMachines" `
  -ResourceGroupName "MeuGrupoRecursos"


CanNotDelete ‚Üí bloqueia exclus√£o.

ReadOnly ‚Üí bloqueia altera√ß√µes e exclus√µes.

üè∑Ô∏è Adicionar Tags a um Recurso

Exemplo: Adicionar tags a uma VM.

Set-AzResource `
  -ResourceGroupName "MeuGrupoRecursos" `
  -ResourceName "MinhaVM" `
  -ResourceType "Microsoft.Compute/virtualMachines" `
  -Tag @{ "Ambiente"="Produ√ß√£o"; "Projeto"="Financeiro"; "Respons√°vel"="EquipeInfra" } `
  -Force

üìå Verificar Tags de um Recurso
(Get-AzResource -ResourceName "MinhaVM").Tags

üîπ Usando Azure CLI
Pr√©-requisito

Instalar o Azure CLI.

Conectar-se √† conta:

az login

üîí Criar um Bloqueio

Exemplo: Bloqueio do tipo ReadOnly em uma m√°quina virtual.

az lock create \
  --name BloqueioVM \
  --lock-type ReadOnly \
  --resource-group MeuGrupoRecursos \
  --resource-name MinhaVM \
  --resource-type "Microsoft.Compute/virtualMachines"

üè∑Ô∏è Adicionar Tags a um Recurso

Exemplo: Adicionar tags a uma VM.

az resource tag \
  --resource-group MeuGrupoRecursos \
  --name MinhaVM \
  --resource-type "Microsoft.Compute/virtualMachines" \
  --tags Ambiente=Produ√ß√£o Projeto=Financeiro Respons√°vel=EquipeInfra

üìå Verificar Tags de um Recurso
az resource show \
  --resource-group MeuGrupoRecursos \
  --name MinhaVM \
  --resource-type "Microsoft.Compute/virtualMachines" \
  --query tags

üîπ Exemplo pr√°tico consolidado

Criar uma VM chamada MinhaVM no grupo MeuGrupoRecursos.

Adicionar um bloqueio CanNotDelete.

Aplicar tags:

Ambiente=Produ√ß√£o

Projeto=Financeiro

Respons√°vel=EquipeInfra

No PowerShell:

New-AzResourceLock -LockName "BloqueioVM" -LockLevel CanNotDelete -ResourceName "MinhaVM" -ResourceType "Microsoft.Compute/virtualMachines" -ResourceGroupName "MeuGrupoRecursos"

Set-AzResource -ResourceGroupName "MeuGrupoRecursos" -ResourceName "MinhaVM" -ResourceType "Microsoft.Compute/virtualMachines" -Tag @{ "Ambiente"="Produ√ß√£o"; "Projeto"="Financeiro"; "Respons√°vel"="EquipeInfra" } -Force


No Azure CLI:

az lock create --name BloqueioVM --lock-type CanNotDelete --resource-group MeuGrupoRecursos --resource-name MinhaVM --resource-type "Microsoft.Compute/virtualMachines"

az resource tag --resource-group MeuGrupoRecursos --name MinhaVM --resource-type "Microsoft.Compute/virtualMachines" --tags Ambiente=Produ√ß√£o Projeto=Financeiro Respons√°vel=EquipeInfra


üëâ Assim, com CLI ou PowerShell, voc√™ garante que a VM n√£o pode ser exclu√≠da e ainda organiza os recursos com tags para relat√≥rios e governan√ßa.
